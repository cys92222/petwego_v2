<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.dao.SnsDao">
  
  <!-- 모든 사진 리스트 -->
  <select id="listAll" resultType="com.example.demo.vo.Pic_BoardVo">
   	select * from pic_board_file
  </select>
  
<!--   sns 글 등록 -->
  <insert id="insertsns">
  	<selectKey keyProperty="photo_no" resultType="java.lang.Integer" order="AFTER">
	  		select seq_photo_no.nextval from dual
	  </selectKey>
  	insert into pic_board values (seq_photo_no.nextval, sysdate, #{photo_detail}, #{user_id})
  </insert>
  
<!--   sns 파일등록 -->
  <insert id="insertfile">
	  
  insert into pic_board_file values (seq_pic_board_no.nextval, #{photo_file_name}, #{photo_no})
  </insert>
  
  
<!--   좋아요 -->
  <insert id="insertlikeit">
  insert into likeit values(seq_like_no.nextval, #(photo_no), #{photo_no}, #{user_id})
  </insert>
  
<!--   좋아요 수 -->
  <select id="likecnt" resultType="java.lang.Integer">
  select count(*) from likeit where photo_no = #{photo_no} and user_id = #{user_id}
  </select>
  
<!--   sns 글 삭제 -->
  <delete id="deletesns">
  delete pic_board where photo_no = #{photo_no} and user_id = #{user_id}
  </delete>
</mapper>